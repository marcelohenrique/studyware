--CREATE TABLE TB_ORGAO (
--	ID BIGINT PRIMARY KEY,
--	SIGLA TEXT UNIQUE NOT NULL,
--	NOME TEXT NOT NULL,
--	DESCRICAO TEXT,
--	SITE TEXT
--);
--
--CREATE TABLE TB_BANCA (
--	ID BIGINT PRIMARY KEY,
--	SIGLA TEXT UNIQUE NOT NULL,
--	NOME TEXT NOT NULL,
--	DESCRICAO TEXT,
--	SITE TEXT
--);
--
--CREATE TABLE TB_CONCURSO (
--	ID BIGINT PRIMARY KEY,
--	ID_ORGAO BIGINT REFERENCES TB_ORGAO ( ID ) NOT NULL,
--	ID_BANCA BIGINT REFERENCES TB_BANCA ( ID ) NOT NULL,
--	ANO SMALLINT NOT NULL,
--	SEQUENCIAL SMALLINT NOT NULL,
--	SITE TEXT,
--	UNIQUE ( ID_ORGAO, ID_BANCA, ANO, SEQUENCIAL )
--);

CREATE TABLE TB_DIA (
	ID BIGINT PRIMARY KEY,
	NOME TEXT NOT NULL,
	DESCRICAO TEXT NOT NULL
);

CREATE TABLE TB_ESTUDO (
	ID BIGINT PRIMARY KEY,
	NOME TEXT UNIQUE NOT NULL,
	DT_INICIO DATE NOT NULL,
	DT_FIM DATE
);

CREATE TABLE TB_ESTUDO_DIA (
	ID BIGINT PRIMARY KEY,
	ID_ESTUDO BIGINT REFERENCES TB_ESTUDO ( ID ) NOT NULL,
	ID_DIA BIGINT REFERENCES TB_DIA ( ID ) NOT NULL,
	TEMPO_ALOCADO BIGINT NOT NULL,
	UNIQUE ( ID_ESTUDO, ID_DIA )
);

CREATE TABLE TB_MATERIA (
	ID BIGINT PRIMARY KEY,
	SIGLA TEXT UNIQUE NOT NULL,
	NOME TEXT NOT NULL,
	DESCRICAO TEXT
);

CREATE TABLE TB_ESTUDO_MATERIA (
	ID BIGINT PRIMARY KEY,
	ID_ESTUDO BIGINT REFERENCES TB_ESTUDO ( ID ) NOT NULL,
	ID_MATERIA BIGINT REFERENCES TB_MATERIA ( ID ) NOT NULL,
	TEMPO_ALOCADO BIGINT NOT NULL,
	NR_ORDEM BIGINT NOT NULL,
	-- SOMA_TEMPO INTERVAL SECOND NOT NULL
	UNIQUE ( ID_ESTUDO, ID_MATERIA )
);

CREATE TABLE TB_HISTORICO_ESTUDO (
	ID BIGINT PRIMARY KEY,
	ID_ESTUDO_MATERIA BIGINT REFERENCES TB_ESTUDO_MATERIA ( ID ) NOT NULL,
	DT_HORA_ESTUDO TIMESTAMP NOT NULL,
	TEMPO_ESTUDADO BIGINT NOT NULL,
	OBSERVACAO TEXT NOT NULL
);

CREATE SEQUENCE SQ_HISTORICO_ESTUDO START 1001 NO CYCLE;
