CREATE TABLE TB_ORGAO (
	ID BIGINT PRIMARY KEY,
	SIGLA TEXT UNIQUE NOT NULL,
	NOME TEXT NOT NULL,
	DESCRICAO TEXT,
	SITE TEXT
);

CREATE TABLE TB_BANCA (
	ID BIGINT PRIMARY KEY,
	SIGLA TEXT UNIQUE NOT NULL,
	NOME TEXT NOT NULL,
	DESCRICAO TEXT,
	SITE TEXT
);

CREATE TABLE TB_CONCURSO (
	ID BIGINT PRIMARY KEY,
	ID_ORGAO BIGINT REFERENCES TB_ORGAO ( ID ) NOT NULL,
	ID_BANCA BIGINT REFERENCES TB_BANCA ( ID ) NOT NULL,
	ANO SMALLINT NOT NULL,
	SEQUENCIAL SMALLINT NOT NULL,
	SITE TEXT,
	UNIQUE ( ID_ORGAO, ID_BANCA, ANO, SEQUENCIAL )
);

CREATE TABLE TB_MATERIA (
	ID BIGINT PRIMARY KEY,
	SIGLA TEXT UNIQUE NOT NULL,
	NOME TEXT NOT NULL,
	DESCRICAO TEXT
);

CREATE TABLE TB_CONCURSO_MATERIA (
	ID BIGINT PRIMARY KEY,
	ID_CONCURSO BIGINT REFERENCES TB_CONCURSO ( ID ) NOT NULL,
	ID_MATERIA BIGINT REFERENCES TB_MATERIA ( ID ) NOT NULL,
	TEMPO_ALOCADO BIGINT NOT NULL
	-- SOMA_TEMPO INTERVAL SECOND NOT NULL
);

CREATE TABLE TB_HISTORICO_ESTUDO (
	ID BIGINT PRIMARY KEY,
	ID_CONCURSO_MATERIA BIGINT REFERENCES TB_CONCURSO_MATERIA ( ID ) NOT NULL,
	DATA_HORA_ESTUDO TIMESTAMP NOT NULL,
	TEMPO_ESTUDADO BIGINT NOT NULL,
	OBSERVACAO TEXT NOT NULL
);

CREATE SEQUENCE SQ_HISTORICO_ESTUDO START 1064 NO CYCLE;