<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<link rel="stylesheet" type="text/css" href="css/grid12col.css" />
	<script type="text/javascript">
		$( document ).ready( function() {
		} );

		function disconnectUser() {
			var revokeUrl = 'https://accounts.google.com/o/oauth2/revoke?token=' + access_token;

			// Realizar uma solicitação GET assíncrona.
			$.ajax({
				type: 'GET',
				url: revokeUrl,
				async: false,
				contentType: "application/json",
				dataType: 'jsonp',
				success: function(nullResponse) {
					// Fazer algo agora que o usuário está desconectado
					// A resposta é sempre indefinida.
					logout();
				},
				error: function(e) {
					// Gerenciar o erro
					console.log(e);
					// Você pode apontar usuários para desconectar manualmente se não for bem-sucedido
					// https://plus.google.com/apps
				}
			});
		}
	</script>
</h:head>
<h:body>

	<p:ajaxStatus onstart="statusDialog.show();"
		onsuccess="statusDialog.hide();" />

	<p:dialog modal="true" widgetVar="statusDialog" header="Carregando..."
		draggable="false" closable="false" resizable="false">
		<p:graphicImage value="/images/ajax-loader.gif" />
	</p:dialog>

	<ui:insert name="menu">
	
		<h:form id="formulariomenu">
			<div class="container">
	
				<p:menubar>

					<p:submenu label="Usuário" icon="ui-icon-person" rendered="#{ sessionAuth.usuario.email == 'mhguara@gmail.com' }">
						<p:menuitem value="Cadastrar" icon="ui-icon-plus" action="#{usuario.telaCadastro()}" />
					</p:submenu>

					<p:submenu label="Estudo" icon="ui-icon-note">
						<p:menuitem value="Cadastrar" icon="ui-icon-plus" />
					</p:submenu>

					<f:facet name="options">
						<p:commandButton value="Logout" icon="ui-icon-extlink" action="#{sigin.logout()}" ajax="false" />
					</f:facet>
				</p:menubar>
	
			</div>
		</h:form>
	
	</ui:insert>

	<ui:insert name="main"></ui:insert>

</h:body>
</html>
